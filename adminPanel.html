<!DOCTYPE html>
<html>
<style>
    .Memory {
        position: absolute;
        --Fill: 300px;
        width: 50px;
        height: var(--Fill);
        top: calc(300px - var(--Fill));
        border: red 1px solid;
        background: black;
        display: inline-grid;
        place-content: center;
        margin: 5px;
        font-size: 25px;
        font-weight: bold;
        font-family: sans-serif;
        color: #555;
        transition: 0.2s;
        text-indent: 150px;
    }
</style>

<body>
    <div id="Mem" class="Memory"></div>
    <div id="CPU" style="position:absolute;left:300px;"></div>

</body>
<script>
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    document.body.appendChild(canvas);
    const mem = document.getElementById("Mem");
    const cpu = document.getElementById("CPU");
    let last = 0;
    const data = [];
    const lerp = (a, b, t) => {
        return a + (b - a) * t;
    }

    const refreshGraph = () => {
        if (data.length > 0) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (data.length > 30) {
                data.splice(0, 1);
            }
            let i = 0;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height);
            data.forEach(e => {
                let x = x / data.length;


                i++;
            })
        }
    }

    const getData = async() => {
        const req = await fetch(window.location, {
            method: "POST"
        });
        const json = await req.json();
        last = Math.floor(json.memory * 100 * 10) / 10;
        mem.textContent = last + "%";
        mem.style.setProperty('--Fill', last + 'px');
        cpu.textContent = json.cpuUsage;
        setTimeout(() => {
            getData();
        }, 1000);
    }
    getData();
</script>

</html>